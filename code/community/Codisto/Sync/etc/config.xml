<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * Codisto eBay Sync Extension
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * @category    Codisto
 * @package     Codisto_Sync
 * @copyright   Copyright (c) 2014 On Technology Pty. Ltd. (http://codisto.com/)
 * @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
 -->
<config>
	<modules>
		<Codisto_Sync>
			<version>0.2.0</version>
			<depends>
				<Mage_Payment/>
			</depends>
		</Codisto_Sync>
	</modules>

	<frontend>
		<routers>
			<codisto-sync>
				<use>standard</use>
				<args>
					<module>Codisto_Sync</module>
					<frontName>codisto-sync</frontName>
				</args>
			</codisto-sync>
		</routers>
	</frontend>
    <layout>
        <updates>
            <codisto>
                <file>codisto.xml</file>
            </codisto>
        </updates>
    </layout>
	<global>
		<models>
            <!-- custom model extending Mage_Payment_Model_Method_Abstract -->
			<ebaypayment>
				<class>Codisto_Sync_Ebaypayment_Model</class>
			</ebaypayment>

            <paymentinfo>
                <class>Codisto_Sync_Model</class>
            </paymentinfo>

		</models>

        <events>
            <payment_info_block_prepare_specific_information>
                <observers>
                    <codisto>
                        <type>singleton</type>
                        <class>Codisto_Sync_Model_Observer</class>
                        <method>paymentInfoBlockPrepareSpecificInformation</method>
                    </codisto>
                </observers>
            </payment_info_block_prepare_specific_information>
        </events>

		<fieldsets>
			<sales_convert_quote>
				<codisto_orderid>
					<to_order>*</to_order>
				</codisto_orderid>
			</sales_convert_quote>
			<sales_convert_order>
				<codisto_orderid>
					<to_quote>*</to_quote>
				</codisto_orderid>
			</sales_convert_order>
		</fieldsets>
		<resources>
			<codisto_setup>
				<setup>
					<module>Codisto_Sync</module>
					<class>Codisto_Sync_Model_Resource_Mysql4_Setup</class>
				</setup>
				<connection>
					<use>core_setup</use>
				</connection>
			</codisto_setup>
			<Codisto_Sync_write>
				<connection>
					<use>local_write</use>
				</connection>
			</Codisto_Sync_write>
			<Codisto_Sync_read>
				<connection>
					<use>local_read</use>
				</connection>
			</Codisto_Sync_read>
		</resources>
		<blocks>
			<modulename>
				<class>Codisto_Sync_Block</class>
			</modulename>


            <adminhtml>
				<rewrite>
					<catalog_product_edit_tabs>Codisto_Sync_Block_Adminhtml_Tabs</catalog_product_edit_tabs>
				</rewrite>

			</adminhtml>
		</blocks>
	</global>
	<default>
		<web>
			<routers>
				<codisto-sync>
					<area>admin</area>
					<class>Codisto_Sync_Controller_Router</class>
				</codisto-sync>
			</routers>
		</web>

		<payment>
			<ebaypayment>
				<active>1</active>
				<model>ebaypayment/paymentmethod</model>
				<order_status>pending</order_status>
				<title>Ebay Order</title>
				<allowspecific>0</allowspecific>
				<group>offline</group>
			</ebaypayment>
		</payment>
	</default>

</config>